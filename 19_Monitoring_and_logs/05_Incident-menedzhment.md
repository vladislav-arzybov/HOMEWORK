# Домашнее задание к занятию 17 «Инцидент-менеджмент» - `Арзыбов Владислав`

## Задание

Составьте постмортем на основе реального сбоя системы GitHub в 2018 году.

Информацию о сбое можно изучить по ссылкам ниже:

* [краткое описание на русском языке](https://habr.com/ru/post/427301/);
* [развёрнутое описание на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).



|Название   | Описание |
|----------------------|---|
|Краткое описание инцидента|  После непродолжительной потери связи между сетевым узлом и датацентром нарушилась топология кластеров Оркестратора, что привело к деградированию системы. |
|Предшествующие события| Плановые работы по замене вышедшего из строя 100G оптического оборудования в дата-центре на восточном побережье США. |
|Причина инцидента| В результате временной потери связи кластеры MySQL на западном побережье США перешли в "неожиданное" для Оркестратора состояние.  |
|Воздействие| Отображение устаревшей и непоследовательной информации. GitHub не мог обслуживать события веб-перехватчиков или создавать и публиковать GitHub Pages. |
|Обнаружение| Инцидент был замечен дежурными инженерами через оповещения системы мониторинга. |
|Реакция|  Группа реагирования провела минимизацию накопления сложности инцидента, отключила часть сервисов для минимизации изменений БД. Также к работе подключились дополнительные разработчики и координатор из инженерной группы БД. Учитывая приоритет целостности данных общее время восстановления составило 24 часа 11 минут. |
|Восстановление| Восстановлены из резервных копий данные MySQL, синхронизированы реплики на обоих сайтах, произведён возврат к стабильной топологии обслуживания, возобновлена обработка заданий в очереди.  |
|Таймлайн| 21 октября 22:52 UTC Нарушилась связь между сетевым узлом и основным дата-центром на восточном побережье США. |
|  |  21 октября 22:54 UTC Внутренние системы мониторинга начали генерировать оповещения о многочисленных сбоях в работе систем. |
| |21 октября 23:07 UTC Группа реагирования вручную заблокировала внутренние средства развёртывания, чтобы предотвратить внесение дополнительных изменений в БД и установила жёлтый статус работоспособности сайта. |
| |21 октября 23:13 UTC Были вызваны дополнительные инженеры из группы разработки баз данных GitHub. |
| |21 октября 23:19 UTC В целях сохранности данных принято решение об остановке выполнения заданий, которые пишут метаданные типа пуш-запросов. |
| |22 октября 00:05 UTC Разработка плана по устранению несоответствий данных и внедрения процедур аварийного переключения для MySQL. |
| |22 октября 00:41 UTC Инициирован процесс резервного копирования для всех затронутых кластеров MySQL. |
| |22 октября 06:51 UTC Несколько кластеров на востоке завершили восстановление из резервных копий и начали реплицировать новые данные с Западным побережьем. |
| |22 октября 07:46 UTC GitHub опубликовал информационное сообщение в блоге об инциденте. |
| |22 октября 11:12 UTC Все основные базы данных снова установлены на восточном побережье США. |
| |22 октября 13:15 UTC Стали приближаться к пиковой нагрузке трафика на GitHub.com. Сокращение совокупного использования реплик чтения позволило репликации наверстать упущенное.|
| |22 октября 16:24 UTC Завершена синхронизация реплик - возврат к исходной топологии. Устранинены проблемы задержки и доступности. Красный статус сохранён, так как ещё нужно обработать накопленные данные. |
| |22 октября 16:45 UTC Балансировка возросшей нагрузки. |
| |22 октября 23:03 UTC Все незавершённые события webhook и сборки Pages обработаны, а целостность и правильная работа всех систем подтверждена. Статус сайта изменён на зелёный  |
|Последующие действия|  1. Измените конфигурацию Orchestrator, чтобы предотвратить продвижение основных баз данных за пределы региональных границ. |
| |2. Ускорить переход на новый механизм отчетов о состоянии, который предоставит более богатую площадку для обсуждения активных инцидентов, более четким и понятным языком.|
| |3. Поддержка обслуживания трафика GitHub из нескольких центров обработки данных. |
| |4. Введена системная практика проверки сценариев сбоев, предже чем они возникнут в реальности (Chaos Engineering). |
